#main-content.projects {
	display: flex;
	flex-direction: column;
	align-items: normal;
	gap: 1rem;
	position: relative;
	height: 100%;
	min-height: 0;
	padding-top: var(--content-spacing);
	box-sizing: border-box;

	nav {
		display: flex;
		justify-content: end;
		height: 1.75rem;
		flex-shrink: 0;
		color: var(--primary-colour);
		gap: .5rem;

		.search-wrapper {
			display: flex;
			gap: .25rem;
			background: var(--secondary-colour);
			border: 1px solid var(--primary-colour);
			padding: .25rem;
			box-sizing: border-box;
			height: 100%;
			border-radius: .25rem;

			>input[type="search"] {
				appearance: none;
				background: none;
				box-sizing: border-box;
				border: none;
				padding: 0;
				height: 100%;
				line-height: 1.2;
				color: inherit;
				outline: none;
			}
		}

		button {
			opacity: .5;
			pointer-events: none;
			border: 0;
			color: inherit;
			height: 100%;
			aspect-ratio: 1;
			background: none;
			padding: 0;
		}
	}

	#projects-list {
		height: auto;
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
		gap: 1.5rem;
		list-style: none;
		padding: 0;
		margin: 0;
		color: var(--primary-colour);
		box-sizing: border-box;
		overflow-y: auto;
		width: 100%;
		max-height: 100%;
		z-index: 0;

		#project-add {
			position: relative;
			display: flex;
			align-items: center;
			justify-content: center;
			height: 100%;
			border: 1px solid var(--primary-colour);
			box-sizing: border-box;
			padding: 4.5rem;
			cursor: pointer;
			min-height: 0;
			border-radius: .25rem;

			&::after {
				content: '';
				background-color: var(--primary-colour);
				mask-image: url(/plus.svg);
				height: 100%;
				aspect-ratio: 1;
				opacity: .5;
				transition: opacity .3s ease;
			}

			&:hover::after {
				opacity: 1;
			}

			#project_add_dialog {
				position: relative;
				color: var(--primary-colour);
				width: 45rem;
				max-width: 80%;
				border-radius: .25rem;
				overflow: visible;

				> button.cancel {
					all: unset;
					background-color: var(--primary-colour);
					mask-image: url(/close-2.svg);
					position: absolute;
					right: .5rem;
					top: .5rem;
					border-radius: 100%;
					border: 1px solid var(--primary-colour);
					aspect-ratio: 1;
					height: 1.5rem;
					opacity: .5;
					transition: opacity .3s ease;
					
					&:hover {
						opacity: 1;
					}
				}

				&::backdrop {
					transition: backdrop-filter .3s ease;
					background: color-mix(in srgb, var(--secondary-colour) 80%, transparent 20%);
					backdrop-filter: blur(10px);
				}

				>form {
					display: grid;
					gap: 1rem;
					grid-template-columns: repeat(4, 1fr);
					grid-template-rows: auto 2rem auto auto auto 4rem;
					grid-auto-rows: auto;

					h1 {
						grid-column: 1 / span 4;
						text-align: center;
						margin: 0;
					}

					label:has(input[name='status']) {
						display: flex;
						align-items: center;
						gap: .5rem;
						cursor: pointer;

						&::after {
							content: 'In progress';
						}

						input {
							appearance: none;
							height: 100%;
							aspect-ratio: 1;
							mask-image: url('/status.svg');
							background-color: var(--primary-colour);
							opacity: .5;

							&:checked {
								opacity: 1;
							}
						}
					}

					label:has(input[name='status']:checked) {
						&::after {
							content: 'Finished';
						}
					}

					button[contract] {
						box-sizing: border-box;
						padding: 0 .25rem;
						background: var(--secondary-colour);
						color: inherit;
						border: 1px solid var(--primary-colour);
						border-radius: .25rem;
						font-family: inherit;
						cursor: pointer;
					}

					label:has(input[name='year']) {
						input {
							appearance: none;
							background: none;
							font-family: inherit;
							font-size: inherit;
							color: inherit;
							border: none;
							border-bottom: 1px solid transparent;
							transition: border .3s ease;
							outline: none;
							width: 100%;

							&:hover {
								border-color: color-mix(in srgb, var(--primary-colour), transparent 50%);
							}

							&:focus {
								border-color: var(--primary-colour);
							}
						}
					}

					input[type='text'],
					input:not([type]) {
						box-sizing: border-box;
						padding: .25rem;
						border: none;
						border-bottom: 1px solid transparent;
						background: var(--secondary-colour);
						color: inherit;
						outline: none;
						transition: border .3s ease;
						font-size: inherit;
						grid-column: 1 / span 2;

						&:hover {
							border-color: color-mix(in srgb, var(--primary-colour) 50%, transparent 50%);
						}

						&:focus {
							border-color: var(--primary-colour);
						}
					}

					input[type='submit'] {
						grid-column: 2 / span 2;
						box-sizing: border-box;
						padding: 0 .25rem;
						background: var(--primary-colour);
						color: var(--secondary-colour);
						border: 1px solid var(--primary-colour);
						border-radius: .25rem;
						font-family: inherit;
						cursor: pointer;
						height: 2rem;
						align-self: end;

						&:hover {
							background-color: var(--secondary-colour);
							color: var(--primary-colour);
						}
					}

					>.parties {
						display: flex;
						align-items: center;
						gap: 1rem;
						font-weight: 300;
						border-radius: .25rem;
						border: 1px solid color-mix(in srgb, var(--primary-colour), transparent 50%);
						padding: .5rem;
						transition: border .3s ease;
						grid-column: span 2;

						&:has(input:focus) {
							border-color: var(--primary-colour);
						}


						input {
							font-family: inherit;
							padding: 0;
							border: none;
						}

						select {
							font-family: inherit;
							font-size: inherit;
							appearance: none;
							border: none;
							background: none;
							padding: 0;
						}

						&::before {
							content: '';
							mask-image: var(--icon);
							aspect-ratio: 1;
							width: 3rem;
							background-color: var(--primary-colour);
							flex-shrink: 0;
						}

						&[type='industry'] {
							grid-column: 2 / span 2;
						}

						ul {
							display: grid;
							gap: .25rem;
							list-style: none;
							padding: 0;
							margin: 0;

							>li {
								min-height: 1.125rem;

								&:hover {
									text-decoration: line-through;
									cursor: pointer;
								}
							}

							.party-add-form {
								display: flex;
								flex-direction: column;
								height: 100%;
								position: relative;

								input {
									outline: none;
									box-sizing: border-box;
									border: 1px solid var(--secondary-colour);
									border-radius: .25rem;
									padding: .25rem 0;
									font-size: inherit;
									order: 99;
								}

								.results {
									display: none;
									flex-direction: column;
									gap: .25rem;
									position: absolute;
									top: 100%;
									margin-top: .5rem;
									background-color: var(--secondary-colour);
									box-sizing: border-box;
									border: 1px solid var(--primary-colour);
									border-radius: .25rem;
									padding: .25rem .5rem;
									width: 150%;
									z-index: 15;
									color: var(--primary-colour);

									input {
										display: none;
									}

									label.title {
										font-weight: bold;
									}

									label.item {
										cursor: pointer;
										transition: opacity .3s ease;
										opacity: .75;

										&:hover {
											opacity: 1;
										}
									}

									form {
										display: flex;
										flex-direction: column;
										gap: .25rem;
									}
								}

								&:has(input:focus),
								&:has(.results:hover) {
									.results:not(:empty) {
										display: flex;
									}
								}
							}
						}
					}
				}
			}
		}

		>li {
			display: grid;
			flex-direction: column;
			align-items: normal;
			grid-template-rows: 1.375rem 11.5rem 1.375rem;
			gap: .5rem;
			border: 1px solid var(--primary-colour);
			cursor: pointer;
			padding: .5rem;
			text-align: center;
			box-sizing: border-box;
			text-transform: uppercase;
			font-weight: 300;
			border-radius: .25rem;
			transition: border-radius .3s ease;

			&:hover {
				border-radius: 1rem;
			}

			.bar {
				display: flex;
				gap: .25rem;
				align-items: center;
				height: 100%;

				div {
					display: flex;
					align-items: center;
					justify-content: center;
					line-height: 1;
					padding: 0 .5rem;
					font-weight: 600;
					letter-spacing: .15em;
					font-size: .875rem;
					height: 100%;
					border-radius: .25rem;
				}

				.new {
					background-color: #7B2a24;
				}

				.draft {
					background-color: var(--primary-colour);
					color: var(--secondary-colour);
				}

				.live {
					margin-left: auto;
					border: 1px solid var(--primary-colour);
				}
			}

			img {
				width: 100%;
				min-height: 0;
				height: 100%;
				object-fit: cover;
				border: none;
				border-radius: .25rem;
			}

			span {
				display: flex;
				align-items: center;
				justify-content: center;
				white-space: nowrap;
				text-overflow: ellipsis;
				overflow: hidden;
				width: 100%;
				text-align: center;
				height: 100%;
			}
		}

	}
}